서버는 사용자가 누구인지 식별할 수 있어야함 → 누구인지 알면 해당 사용자가 어떤 작업이나 리소스에 집근할 수 있는지 결정할 수 있음

HTTP 에서의 자체적인 인증 관련 기능을 제공함

## 인증

- 사용자가 누구인지 증명하는 것
- 신분증과 같은 개념

### HTTP 인증 요구/응답 프레임워크

- HTTP는 사용자 인증을 하는 자체 인증 요구/응답 프레임워크를 제공

### 인증 프로토콜과 헤더

- HTTP는 필요에 따라 고쳐 쓸 수 있는 제어 헤더를 통해 다른 인증 프로토콜에 맞추어 확장할 수 있는 프레임워크 제공

| 단계                                       | 헤더               | 설명                                                         | 메서드/상태 |
| ------------------------------------------ | ------------------ | ------------------------------------------------------------ | ----------- |
| 요청                                       |                    | 첫 번째 요청에는 인증 정보가 없음                            | GET         |
| 인증 요구                                  | WWW-Authenticate   | 서버는 사용자에게 사용 자 이름과 비밀번호를 제공하라고 요구  |             |
| WWW-Authenticate 헤더에서 해당 영역을 설명 | 401 Unauthorized   |                                                              |             |
| 인증                                       | Authorization      | 인증 알고리즘, 사용자 이름과 비밀번호를 기술한 Authorization 헤더를 보냄 | GET         |
| 성공                                       | Authorization-Info | 인증 정보가 정확하면 문서와 함께 응답                        | 200 OK      |

### 보안 영역

- 웹 서버는 기밀 문서를 보안 영역 (realm) 그룹으로 나눔
- 보안 영역은 각기 다른 사용자 권한을 요구

## 기본 인증

- 가장 잘 알려진 HTTP 인증 규약
- 기본 인증 프로토콜은 Authentication-Info 헤더를 사용하지 않음

| 인증 요구/응답                | 헤더 문법                                                    |
| ----------------------------- | ------------------------------------------------------------ |
| 서버 → 클라이언트 (인증 요구) | WWW-Authenticate: Basic realm=””                             |
| 클라이언트 → 서버 (응답)      | Authorization: Basic (base-64로 인코딩한 사용자 이름과 비밀번호) |

- 사용자의 이름과 비밀번호를 콜론으로 이어서 합치고, base-64 코딩 method를 사용해 인코딩한다.

### base-64 인코딩

- 8비트 바이트로 이루어진 시퀀스를 6비트 덩어리의 시퀀스로 변환
  - 각 6비트 조각은 문자와 숫자로 이루어진 64개의 문자중 선택

- 바이너리, 텍스트, 국제 문자 데이터 문자열 받아서 전송할 수 있게, 전송 가능한 문자인 알파벳으로 변환하기 위해 발명됨
- 원본 문자열이 변질될 걱정 없이 원격에서 디코딩 할 수 있음

### 프록시 인증

- 중개 프록시 서버를 통해 인증할 수 있음
- 프록시 서버에서 접근 정책을 중앙 관리할 수 있기 때문에 리소스 전체에 대해 통합 접근 제어를 하기 위해 사용하면 좋음
- 가장 첫번째 단계는 사용자를 식별
- 웹 서버 인증과 헤더와 상태 코드만 다르고 절차는 같음

| 웹서버 헤더            | 프록시 서버 헤더          |
| ---------------------- | ------------------------- |
| 비인증 상태 코드 : 401 | 비인증 상태 코드 : 407    |
| WWW-Authenticate       | Proxy-Authenticate        |
| Authorization          | Proxy-Authorization       |
| Authentication-Info    | Proxy-Authentication-Info |

## 기본 인증의 보안 결함

- base-64 인코딩은 쉽게 디코딩할 수 있음
  - HTTP 트랜젝션을 SSL 암호화 채널을 통해 보내거나, 보안이 강화된 다이제스트 인증을 사용하는 것이 좋음
- 비밀번호가 디코딩하기에 복잡한 방식으로 인코딩 되어있다고 해도 제 3자가 캡쳐 후 원 서버에 보내서 인증에 성공할 수 있음
  - 기본 인증은 재전송 공격을 예방하기 위한 어떤 일도 하지 않음
- 사용자들은 대부분 같은 아이디와 비밀번호를 사용함 → 누군가는 그것을 탈취할 수 있음
- 트랜젝션의 의도를 바꿔버리는 프록시나 중간자가 개입하는 경우 기본 인증이 정상적 작동을 보장하지 않음
- 가짜 서버의 위장에 취약함